---
/**
 * ─── Header Component ───
 * Site header with logo, navigation, and mobile menu toggle.
 * Implements accessible landmarks and keyboard navigation.
 */
import Nav from "./Nav.astro";
import { SITE } from "@data/site";
---

<header class="header" role="banner">
  <div class="container cluster header__inner">
    <!-- Logo -->
    <a href="/" class="header__logo" aria-label={`${SITE.name} — Ir al inicio`}>
      <img
        src="/favicon.svg"
        alt=""
        width="32"
        height="32"
        aria-hidden="true"
      />
      <span class="header__brand">{SITE.name}</span>
    </a>

    <!-- Mobile Menu Toggle -->
    <button
      class="header__toggle"
      aria-expanded="false"
      aria-controls="main-nav"
      aria-label="Abrir menú de navegación"
    >
      <span class="header__toggle-bar" aria-hidden="true"></span>
      <span class="header__toggle-bar" aria-hidden="true"></span>
      <span class="header__toggle-bar" aria-hidden="true"></span>
    </button>

    <!-- Navigation -->
    <div id="main-nav" class="header__nav">
      <Nav />
    </div>
  </div>
</header>

<script>
  const toggle = document.querySelector(".header__toggle");
  const nav = document.getElementById("main-nav");

  toggle?.addEventListener("click", () => {
    const expanded = toggle.getAttribute("aria-expanded") === "true";
    toggle.setAttribute("aria-expanded", String(!expanded));
    nav?.classList.toggle("header__nav--open");
  });
</script>

<style>
  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    background-color: var(--color-bg);
    border-block-end: 1px solid var(--color-border-light);
    padding-block: var(--space-md);
  }

  .header__inner {
    justify-content: space-between;
  }

  .header__logo {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    text-decoration: none;
    color: var(--color-primary);
  }

  .header__brand {
    font-weight: 700;
    font-size: var(--text-lg);
  }

  .header__toggle {
    display: none;
    flex-direction: column;
    gap: 4px;
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--space-sm);
  }

  .header__toggle-bar {
    display: block;
    width: 24px;
    height: 2px;
    background-color: var(--color-primary);
    transition: transform var(--transition-fast);
  }

  @media (max-width: 768px) {
    .header__toggle {
      display: flex;
    }

    .header__nav {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--color-bg);
      padding: var(--space-lg) var(--container-padding);
      border-block-end: 1px solid var(--color-border-light);
      box-shadow: var(--shadow-md);
    }

    .header__nav--open {
      display: block;
    }
  }
</style>
